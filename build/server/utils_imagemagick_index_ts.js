"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "utils_imagemagick_index_ts";
exports.ids = ["utils_imagemagick_index_ts"];
exports.modules = {

/***/ "./utils/imagemagick/index.ts":
/*!************************************!*\
  !*** ./utils/imagemagick/index.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"convert\": () => (/* binding */ convert)\n/* harmony export */ });\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var utils_functions__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! utils/functions */ \"./utils/functions.ts\");\n\n\nconst convert = async (files, extension, localEcho)=>{\n    const returnFiles = [];\n    await (0,utils_functions__WEBPACK_IMPORTED_MODULE_1__.loadFiles)([\n        \"/Program Files/imagemagick/wasm-imagemagick.umd-es5.min.js\", \n    ]);\n    const { call  } = window[\"wasm-imagemagick\"];\n    await Promise.all(files.map(async ([fileName, fileData])=>{\n        const baseName = (0,path__WEBPACK_IMPORTED_MODULE_0__.basename)(fileName);\n        const newName = `${(0,path__WEBPACK_IMPORTED_MODULE_0__.basename)(fileName, (0,path__WEBPACK_IMPORTED_MODULE_0__.extname)(fileName))}.${extension}`;\n        const { outputFiles: [image] = [] , stderr , stdout ,  } = await call([\n            {\n                content: fileData,\n                name: baseName\n            }\n        ], [\n            \"convert\",\n            baseName,\n            \"-verbose\",\n            newName\n        ]);\n        const output = [\n            ...stdout,\n            ...stderr\n        ].join(\"\\n\");\n        if (output) localEcho?.println(output);\n        returnFiles.push([\n            (0,path__WEBPACK_IMPORTED_MODULE_0__.join)((0,path__WEBPACK_IMPORTED_MODULE_0__.dirname)(fileName), newName),\n            image?.blob ? Buffer.from(await image.blob.arrayBuffer()) : Buffer.from(\"\"), \n        ]);\n    }));\n    return returnFiles;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi91dGlscy9pbWFnZW1hZ2ljay9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ3dEO0FBQ1o7QUFHckMsTUFBTUssT0FBTyxHQUFHLE9BQ3JCQyxLQUErQixFQUMvQkMsU0FBaUIsRUFDakJDLFNBQXFCLEdBQ2lCO0lBQ3RDLE1BQU1DLFdBQVcsR0FBNkIsRUFBRTtJQUVoRCxNQUFNTCwwREFBUyxDQUFDO1FBQ2QsNERBQTREO0tBQzdELENBQUMsQ0FBQztJQUVILE1BQU0sRUFBRU0sSUFBSSxHQUFFLEdBQUdDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztJQUUzQyxNQUFNQyxPQUFPLENBQUNDLEdBQUcsQ0FDZlAsS0FBSyxDQUFDUSxHQUFHLENBQUMsT0FBTyxDQUFDQyxRQUFRLEVBQUVDLFFBQVEsQ0FBQyxHQUFLO1FBQ3hDLE1BQU1DLFFBQVEsR0FBR2pCLDhDQUFRLENBQUNlLFFBQVEsQ0FBQztRQUNuQyxNQUFNRyxPQUFPLEdBQUcsQ0FBQyxFQUFFbEIsOENBQVEsQ0FBQ2UsUUFBUSxFQUFFYiw2Q0FBTyxDQUFDYSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRVIsU0FBUyxDQUFDLENBQUM7UUFDdkUsTUFBTSxFQUNKWSxXQUFXLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUN6QkMsTUFBTSxHQUNOQyxNQUFNLEtBQ1AsR0FBRyxNQUFNWixJQUFJLENBQ1o7WUFBQztnQkFBRWEsT0FBTyxFQUFFUCxRQUFRO2dCQUFFUSxJQUFJLEVBQUVQLFFBQVE7YUFBRTtTQUFDLEVBQ3ZDO1lBQUMsU0FBUztZQUFFQSxRQUFRO1lBQUUsVUFBVTtZQUFFQyxPQUFPO1NBQUMsQ0FDM0M7UUFDRCxNQUFNTyxNQUFNLEdBQUc7ZUFBSUgsTUFBTTtlQUFLRCxNQUFNO1NBQUMsQ0FBQ2xCLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFaEQsSUFBSXNCLE1BQU0sRUFBRWpCLFNBQVMsRUFBRWtCLE9BQU8sQ0FBQ0QsTUFBTSxDQUFDLENBQUM7UUFFdkNoQixXQUFXLENBQUNrQixJQUFJLENBQUM7WUFDZnhCLDBDQUFJLENBQUNGLDZDQUFPLENBQUNjLFFBQVEsQ0FBQyxFQUFFRyxPQUFPLENBQUM7WUFDaENFLEtBQUssRUFBRVEsSUFBSSxHQUNQQyxNQUFNLENBQUNDLElBQUksQ0FBQyxNQUFNVixLQUFLLENBQUNRLElBQUksQ0FBQ0csV0FBVyxFQUFFLENBQUMsR0FDM0NGLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDLEVBQUUsQ0FBQztTQUNwQixDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FDSCxDQUFDO0lBRUYsT0FBT3JCLFdBQVcsQ0FBQztBQUNyQixDQUFDLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zdGVmZm0yLy4vdXRpbHMvaW1hZ2VtYWdpY2svaW5kZXgudHM/MzU5NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IExvY2FsRWNobyB9IGZyb20gXCJjb21wb25lbnRzL2FwcHMvVGVybWluYWwvdHlwZXNcIjtcclxuaW1wb3J0IHsgYmFzZW5hbWUsIGRpcm5hbWUsIGV4dG5hbWUsIGpvaW4gfSBmcm9tIFwicGF0aFwiO1xyXG5pbXBvcnQgeyBsb2FkRmlsZXMgfSBmcm9tIFwidXRpbHMvZnVuY3Rpb25zXCI7XHJcbmltcG9ydCB0eXBlIHsgSW1hZ2VNYWdpY2tDb252ZXJ0RmlsZSB9IGZyb20gXCJ1dGlscy9pbWFnZW1hZ2ljay90eXBlc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbnZlcnQgPSBhc3luYyAoXHJcbiAgZmlsZXM6IEltYWdlTWFnaWNrQ29udmVydEZpbGVbXSxcclxuICBleHRlbnNpb246IHN0cmluZyxcclxuICBsb2NhbEVjaG8/OiBMb2NhbEVjaG9cclxuKTogUHJvbWlzZTxJbWFnZU1hZ2lja0NvbnZlcnRGaWxlW10+ID0+IHtcclxuICBjb25zdCByZXR1cm5GaWxlczogSW1hZ2VNYWdpY2tDb252ZXJ0RmlsZVtdID0gW107XHJcblxyXG4gIGF3YWl0IGxvYWRGaWxlcyhbXHJcbiAgICBcIi9Qcm9ncmFtIEZpbGVzL2ltYWdlbWFnaWNrL3dhc20taW1hZ2VtYWdpY2sudW1kLWVzNS5taW4uanNcIixcclxuICBdKTtcclxuXHJcbiAgY29uc3QgeyBjYWxsIH0gPSB3aW5kb3dbXCJ3YXNtLWltYWdlbWFnaWNrXCJdO1xyXG5cclxuICBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIGZpbGVzLm1hcChhc3luYyAoW2ZpbGVOYW1lLCBmaWxlRGF0YV0pID0+IHtcclxuICAgICAgY29uc3QgYmFzZU5hbWUgPSBiYXNlbmFtZShmaWxlTmFtZSk7XHJcbiAgICAgIGNvbnN0IG5ld05hbWUgPSBgJHtiYXNlbmFtZShmaWxlTmFtZSwgZXh0bmFtZShmaWxlTmFtZSkpfS4ke2V4dGVuc2lvbn1gO1xyXG4gICAgICBjb25zdCB7XHJcbiAgICAgICAgb3V0cHV0RmlsZXM6IFtpbWFnZV0gPSBbXSxcclxuICAgICAgICBzdGRlcnIsXHJcbiAgICAgICAgc3Rkb3V0LFxyXG4gICAgICB9ID0gYXdhaXQgY2FsbChcclxuICAgICAgICBbeyBjb250ZW50OiBmaWxlRGF0YSwgbmFtZTogYmFzZU5hbWUgfV0sXHJcbiAgICAgICAgW1wiY29udmVydFwiLCBiYXNlTmFtZSwgXCItdmVyYm9zZVwiLCBuZXdOYW1lXVxyXG4gICAgICApO1xyXG4gICAgICBjb25zdCBvdXRwdXQgPSBbLi4uc3Rkb3V0LCAuLi5zdGRlcnJdLmpvaW4oXCJcXG5cIik7XHJcblxyXG4gICAgICBpZiAob3V0cHV0KSBsb2NhbEVjaG8/LnByaW50bG4ob3V0cHV0KTtcclxuXHJcbiAgICAgIHJldHVybkZpbGVzLnB1c2goW1xyXG4gICAgICAgIGpvaW4oZGlybmFtZShmaWxlTmFtZSksIG5ld05hbWUpLFxyXG4gICAgICAgIGltYWdlPy5ibG9iXHJcbiAgICAgICAgICA/IEJ1ZmZlci5mcm9tKGF3YWl0IGltYWdlLmJsb2IuYXJyYXlCdWZmZXIoKSlcclxuICAgICAgICAgIDogQnVmZmVyLmZyb20oXCJcIiksXHJcbiAgICAgIF0pO1xyXG4gICAgfSlcclxuICApO1xyXG5cclxuICByZXR1cm4gcmV0dXJuRmlsZXM7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJiYXNlbmFtZSIsImRpcm5hbWUiLCJleHRuYW1lIiwiam9pbiIsImxvYWRGaWxlcyIsImNvbnZlcnQiLCJmaWxlcyIsImV4dGVuc2lvbiIsImxvY2FsRWNobyIsInJldHVybkZpbGVzIiwiY2FsbCIsIndpbmRvdyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJmaWxlTmFtZSIsImZpbGVEYXRhIiwiYmFzZU5hbWUiLCJuZXdOYW1lIiwib3V0cHV0RmlsZXMiLCJpbWFnZSIsInN0ZGVyciIsInN0ZG91dCIsImNvbnRlbnQiLCJuYW1lIiwib3V0cHV0IiwicHJpbnRsbiIsInB1c2giLCJibG9iIiwiQnVmZmVyIiwiZnJvbSIsImFycmF5QnVmZmVyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/imagemagick/index.ts\n");

/***/ })

};
;